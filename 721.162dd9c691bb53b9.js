"use strict";(self.webpackChunkpal_huila=self.webpackChunkpal_huila||[]).push([[721],{8721:(_t,F,d)=>{d.r(F),d.d(F,{PerfilModule:()=>ut});var v=d(6814),C=d(614),e=d(8926),H=d(1717),P=d(3968),K=d(7505),G=d(313);function V(r,c){if(1&r&&e._UZ(0,"img",26),2&r){const t=e.oxw();e.s9C("src",null==t.user?null:t.user.bannerImg,e.LSH)}}function X(r,c){1&r&&e._UZ(0,"div",27)}function $(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",28)(1,"button",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.modaledit())}),e.O4$(),e.TgZ(2,"svg",30),e._UZ(3,"path",31),e.qZA(),e._uU(4,"Editar"),e.qZA()()}}function ee(r,c){if(1&r&&e._UZ(0,"img",26),2&r){const t=e.oxw();e.s9C("src",null==t.user?null:t.user.fotoUser,e.LSH)}}function te(r,c){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij("Mis ",t,"")}}function ie(r,c){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t)}}const ne=function(r){return{"border-b-4 border-primary-500":r}};function oe(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw();return a.buttonPag(o),e.KtG(a.currentPage=1)}),e.YNc(1,te,2,1,"span",33),e.YNc(2,ie,2,1,"span",33),e.qZA()}if(2&r){const t=c.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(3,ne,n.pag===t)),e.xp6(1),e.Q6J("ngIf",n.userauth.uid===(null==n.user?null:n.user.uid)),e.xp6(1),e.Q6J("ngIf",n.userauth.uid!==(null==n.user?null:n.user.uid))}}function re(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.modaledit())}),e.O4$(),e.TgZ(1,"svg",37),e._UZ(2,"path",38),e.qZA(),e._uU(3,"Agregar ubicaci\xf3n"),e.qZA()}}function ae(r,c){if(1&r&&(e.TgZ(0,"span",34),e.YNc(1,re,4,0,"button",35),e._uU(2),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null!=t.user&&t.user.ubicacion)&&(null==t.user?null:t.user.uid)===t.userauth.uid),e.xp6(1),e.hij("",null==(null==t.user?null:t.user.ubicacion)?"":null==t.user?null:t.user.ubicacion," ")}}function se(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.modaledit())}),e.O4$(),e.TgZ(1,"svg",37),e._UZ(2,"path",38),e.qZA()()}}function ce(r,c){if(1&r&&(e.TgZ(0,"span",39),e.YNc(1,se,3,0,"button",40),e._uU(2),e.ALo(3,"date"),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null!=t.user&&t.user.fechaCreacion)&&(null==t.user?null:t.user.uid)===t.userauth.uid),e.xp6(1),e.hij("",null==(null==t.user?null:t.user.fechaCreacion)?":D":"Se uni\xf3 el: "+e.xi3(3,2,null==t.user?null:t.user.fechaCreacion,"yyyy-MM-dd")," ")}}function le(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.modaledit())}),e.O4$(),e.TgZ(1,"svg",37),e._UZ(2,"path",38),e.qZA()()}}function he(r,c){if(1&r&&(e.TgZ(0,"span",41),e.YNc(1,le,3,0,"button",40),e._uU(2),e.ALo(3,"date"),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null!=t.user&&t.user.fechaUltimoLogin)&&(null==t.user?null:t.user.uid)===t.userauth.uid),e.xp6(1),e.hij(" ",null==(null==t.user?null:t.user.fechaUltimoLogin)?":D":"Visto ultima vez: "+e.xi3(3,2,null==t.user?null:t.user.fechaUltimoLogin,"yyyy-MM-dd, HH:mm:ss")," ")}}function pe(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.modaledit())}),e.O4$(),e.TgZ(1,"svg",37),e._UZ(2,"path",38),e.qZA(),e._uU(3," Agregar descripcion "),e.qZA()}}function de(r,c){if(1&r&&(e.TgZ(0,"span",42),e.YNc(1,pe,4,0,"button",43),e.TgZ(2,"span",44),e._uU(3),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null!=t.user&&t.user.descripcion)&&(null==t.user?null:t.user.uid)===t.userauth.uid),e.xp6(2),e.Oqu(null==t.user?null:t.user.descripcion)}}function ue(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.modaledit())}),e.O4$(),e.TgZ(1,"svg",37),e._UZ(2,"path",38),e.qZA(),e._uU(3,"Agregar cel"),e.qZA()}}function ge(r,c){if(1&r&&(e.TgZ(0,"a",48)(1,"span",49),e.O4$(),e.TgZ(2,"svg",50),e._UZ(3,"path",51),e.qZA()(),e.kcU(),e.TgZ(4,"span",52),e._uU(5),e._UZ(6,"img",53),e.qZA()()),2&r){const t=e.oxw(2);e.MGl("href","tel:",t.user.numeroTel,"",e.LSH),e.xp6(5),e.hij("",null==t.user?null:t.user.numeroTel," ")}}function me(r,c){if(1&r&&(e.TgZ(0,"span",46),e.YNc(1,ue,4,0,"button",40),e.YNc(2,ge,7,2,"a",47),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null!=t.user&&t.user.numeroTel)&&(null==t.user?null:t.user.uid)===t.userauth.uid),e.xp6(1),e.Q6J("ngIf",null==t.user?null:t.user.numeroTel)}}function fe(r,c){1&r&&(e.TgZ(0,"div",54),e._uU(1,"ola"),e.qZA())}function xe(r,c){1&r&&(e.TgZ(0,"div",54),e._uU(1,"Likes"),e.qZA())}let _e=(()=>{class r{constructor(t,n,i,o){this.auth=t,this.router=n,this.route=i,this.modalService=o,this.pag="Sitios",this.currentPage=1,this.buttonPags=["Sitios","Likes"],this.auth.onAuthStateChanged((a,s)=>{this.userauth=a})}ngOnInit(){this.route.params.subscribe(t=>{this.profileId=t.id,this.profileId&&this.auth.obtenerUsuarioPorUserName(this.profileId).subscribe(n=>{this.user=n[0]}),this.modalService.setProfileHeader(!1)}),console.log(this.router.url),this.auth.setData(this.router.url)}buttonPag(t){this.pag=t}modaledit(){this.router.navigate(["edit"],{relativeTo:this.route})}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(H.e),e.Y36(C.F0),e.Y36(C.gz),e.Y36(P.H))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-profile"]],decls:32,vars:14,consts:[[1,"absolute"],[1,"bg-black","bg-opacity-5","gap-5","flex","flex-col","min-h-screen"],[1,"w-full","min-h-[350px]","relative","flex","justify-center","mb-5"],[1,"w-full","max-h-[350px]","overflow-hidden","flex","justify-center","rounded-b-3xl"],["class","w-full h-full object-cover object-center ",3,"src",4,"ngIf"],["class","w-full h-full object-cover object-center  bg-black opacity-20 ",4,"ngIf"],[1,"bg-white","absolute","w-full","min-h-[200px]","rounded-md","p-5","-bottom-10","xl:max-w-[1280px]","z-30"],["class","absolute right-5",4,"ngIf"],[1,"flex","flex-col","justify-center","items-center"],[1,"bg:w-[80px]","md:w-[100px]","bg:h-[80px]","md:h-[100px]","max-w-[100px]","max-h-[100px]","rounded-full","bg-black","bg-opacity-5","overflow-hidden"],["class","w-full h-full object-cover object-center",3,"src",4,"ngIf"],[1,"flex","flex-row","justify-center","font-work","text-lg","font-semibold"],[1,"flex","flex-row","justify-center","font-work","text-2xl","font-bold"],["id","Paginaci\xf3n servicios",1,"flex","flex-row","justify-center","gap-5","px-2","mt-2"],["class","font-Work text-sm",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"xl:w-[1280px]","w-full","max-w-[1280px]","relative","mx-auto","flex","md:flex-row","flex-col","gap-5","mt-5"],[1,"w-full","md:w-[30%]","md:max-w-[30%]","min-h-[300px]","max-h-full","bg-white","px-4","py-5","rounded-lg","flex","flex-col"],[1,"text-xl","font-Blinker","font-semibold","text-center"],[1,"flex","flex-col","gap-4","mt-5","text-gray-600","font-Blinker"],["id","ubicacion","class"," flex flex-row items-center ",4,"ngIf"],["id","accountDcreate","class","   flex flex-row items-center",4,"ngIf"],["id","accountDlast","class","   flex flex-row items-center",4,"ngIf"],["id","descripcion","class","flex flex-row items-center",4,"ngIf"],["id","numeroTel","class","   flex flex-row items-center",4,"ngIf"],[1,"w-full","md:w-[69%]"],["class","w-full h-full p-3",4,"ngIf"],[1,"w-full","h-full","object-cover","object-center",3,"src"],[1,"w-full","h-full","object-cover","object-center","bg-black","opacity-20"],[1,"absolute","right-5"],[1,"rounded-xl","flex","flex-row","border","bg:px-2","md:px-3","py-2","font-work","font-semibold",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 -960 960 960","width","24"],["d","M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"],[1,"font-Work","text-sm",3,"ngClass","click"],[4,"ngIf"],["id","ubicacion",1,"flex","flex-row","items-center"],["class"," h-[20px] opacity-50 flex flex-row items-center",3,"click",4,"ngIf"],[1,"h-[20px]","opacity-50","flex","flex-row","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","20","viewBox","0 -960 960 960","width","20"],["d","M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"],["id","accountDcreate",1,"flex","flex-row","items-center"],["class","h-[20px] opacity-50 flex flex-row items-center",3,"click",4,"ngIf"],["id","accountDlast",1,"flex","flex-row","items-center"],["id","descripcion",1,"flex","flex-row","items-center"],["class","max-w-[30%] opacity-50 flex flex-row items-center",3,"click",4,"ngIf"],[1,"flex-wrap","overflow-hidden","h-full","break-all"],[1,"max-w-[30%]","opacity-50","flex","flex-row","items-center",3,"click"],["id","numeroTel",1,"flex","flex-row","items-center"],["class","w-[50%] flex",3,"href",4,"ngIf"],[1,"w-[50%]","flex",3,"href"],[1,""],["role","img","xmlns","http://www.w3.org/2000/svg","height","20","viewBox","0 -960 960 960","width","20",1,"fill-primary-500"],["d","M793.126-99q-121.224 0-244.675-58Q425-215 320.5-319t-163-228.959Q99-672.919 99-792.252q0-29.177 20-49.462Q139-862 168-862h135q31.389 0 51.194 16.5Q374-829 380-798l26.929 105.641Q409-666 403.5-645.133q-5.5 20.866-20.729 34.359L281-517q20 36 46.5 68.5T385-387q33 36 67 61.5t69 44.5l99-99q16-18 37.826-24.5Q679.651-411 704-405l95 22q29.688 9 46.344 29.044Q862-333.912 862-304v136q0 29.571-20.357 49.286Q821.286-99 793.126-99ZM235-598l81-76-21.962-96H192q1 36 9.457 77.941T235-598Zm370 365q35 17 79 28t86 14v-.5.5-103.822L682-315l-77 82ZM235-598Zm370 365Z"],[1,"flex","flex-row"],["src","assets/img/arrow.svg",1,"w-[15px]","max-w-[15px]","min-w-[15px]"],[1,"w-full","h-full","p-3"]],template:function(n,i){1&n&&(e._UZ(0,"router-outlet",0)(1,"app-navheader"),e.TgZ(2,"main",1)(3,"div",2)(4,"div",3),e.YNc(5,V,1,1,"img",4),e.YNc(6,X,1,0,"div",5),e.qZA(),e.TgZ(7,"div",6),e.YNc(8,$,5,0,"div",7),e.TgZ(9,"div",8)(10,"span",9),e.YNc(11,ee,1,1,"img",10),e.qZA()(),e.TgZ(12,"h3",11),e._uU(13),e.qZA(),e.TgZ(14,"h4",12),e._uU(15),e.qZA(),e.TgZ(16,"div",13),e.YNc(17,oe,3,5,"button",14),e.qZA()()(),e.TgZ(18,"div",15)(19,"div",16)(20,"span",17),e._uU(21,"Descripci\xf3n"),e.qZA(),e.TgZ(22,"div",18),e.YNc(23,ae,3,2,"span",19),e.YNc(24,ce,4,5,"span",20),e.YNc(25,he,4,5,"span",21),e.YNc(26,de,4,2,"span",22),e.YNc(27,me,3,2,"span",23),e.qZA()(),e.TgZ(28,"div",24),e.YNc(29,fe,2,0,"div",25),e.YNc(30,xe,2,0,"div",25),e.qZA()()(),e._UZ(31,"app-navfooter")),2&n&&(e.xp6(5),e.Q6J("ngIf",null!=(null==i.user?null:i.user.bannerImg)),e.xp6(1),e.Q6J("ngIf",null===(null==i.user?null:i.user.bannerImg)),e.xp6(2),e.Q6J("ngIf",(null==i.user?null:i.user.uid)===(null==i.userauth?null:i.userauth.uid)),e.xp6(3),e.Q6J("ngIf",null!=(null==i.user?null:i.user.fotoUser)),e.xp6(2),e.hij("@",null==i.user?null:i.user.userName,""),e.xp6(2),e.Oqu(null==i.user?null:i.user.nombre),e.xp6(2),e.Q6J("ngForOf",i.buttonPags),e.xp6(6),e.Q6J("ngIf",(null==i.user?null:i.user.ubicacion)||(null==i.user?null:i.user.uid)===i.userauth.uid),e.xp6(1),e.Q6J("ngIf",(null==i.user?null:i.user.fechaCreacion)||(null==i.user?null:i.user.uid)===i.userauth.uid),e.xp6(1),e.Q6J("ngIf",(null==i.user?null:i.user.fechaUltimoLogin)||(null==i.user?null:i.user.uid)===i.userauth.uid),e.xp6(1),e.Q6J("ngIf",(null==i.user?null:i.user.descripcion)||(null==i.user?null:i.user.uid)===i.userauth.uid),e.xp6(1),e.Q6J("ngIf",(null==i.user?null:i.user.numeroTel)||(null==i.user?null:i.user.uid)===i.userauth.uid),e.xp6(2),e.Q6J("ngIf","Sitios"===i.pag),e.xp6(1),e.Q6J("ngIf","Likes"===i.pag))},dependencies:[v.mk,v.sg,v.O5,C.lC,K.i,G.U,v.uU]})}return r})();var k=d(6593),Z=d(5861),Me=d(9773),ve=d(1374),Q=d(3019),Ce=d(4829),we=d(5592),be=d(1631),ye=d(4266),A=d(4674),Ae=d(7400);const Te=["addListener","removeListener"],Ie=["addEventListener","removeEventListener"],Re=["on","off"];function T(r,c,t,n){if((0,A.m)(t)&&(n=t,t=void 0),n)return T(r,c,t).pipe((0,Ae.Z)(n));const[i,o]=function ze(r){return(0,A.m)(r.addEventListener)&&(0,A.m)(r.removeEventListener)}(r)?Ie.map(a=>s=>r[a](c,s,t)):function Ze(r){return(0,A.m)(r.addListener)&&(0,A.m)(r.removeListener)}(r)?Te.map(L(r,c)):function Se(r){return(0,A.m)(r.on)&&(0,A.m)(r.off)}(r)?Re.map(L(r,c)):[];if(!i&&(0,ye.z)(r))return(0,be.z)(a=>T(a,c,t))((0,Ce.Xf)(r));if(!i)throw new TypeError("Invalid event target");return new we.y(a=>{const s=(...l)=>a.next(1<l.length?l:l[0]);return i(s),()=>o(s)})}function L(r,c){return t=>n=>r[t](c,n)}const Ue=["wrapper"],He=["sourceImage"];function ke(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"img",4,5),e.NdJ("load",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.imageLoadedInView())})("mousedown",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.startMove(i,o.moveTypes.Drag))})("touchstart",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.startMove(i,o.moveTypes.Drag))})("error",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.loadImageError(i))}),e.qZA()}if(2&r){const t=e.oxw();e.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),e.ekj("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),e.Q6J("src",t.safeImgDataUrl,e.LSH),e.uIk("alt",t.imageAltText)}}function Oe(r,c){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",9),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"topleft"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"topleft"))}),e._UZ(2,"span",10),e.qZA(),e.TgZ(3,"span",11),e._UZ(4,"span",10),e.qZA(),e.TgZ(5,"span",12),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"topright"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"topright"))}),e._UZ(6,"span",10),e.qZA(),e.TgZ(7,"span",13),e._UZ(8,"span",10),e.qZA(),e.TgZ(9,"span",14),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottomright"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottomright"))}),e._UZ(10,"span",10),e.qZA(),e.TgZ(11,"span",15),e._UZ(12,"span",10),e.qZA(),e.TgZ(13,"span",16),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottomleft"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottomleft"))}),e._UZ(14,"span",10),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"span",10),e.qZA(),e.TgZ(17,"span",18),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"top"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"top"))}),e.qZA(),e.TgZ(18,"span",19),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"right"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"right"))}),e.qZA(),e.TgZ(19,"span",20),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottom"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"bottom"))}),e.qZA(),e.TgZ(20,"span",21),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"left"))})("touchstart",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startMove(i,o.moveTypes.Resize,"left"))}),e.qZA(),e.BQk()}}function Ee(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("keydown",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.keyboardAccess(i))}),e.TgZ(1,"div",7),e.NdJ("mousedown",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.startMove(i,o.moveTypes.Move))})("touchstart",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.startMove(i,o.moveTypes.Move))}),e.qZA(),e.YNc(2,Oe,21,0,"ng-container",8),e.qZA()}if(2&r){const t=e.oxw();e.Udp("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),e.ekj("ngx-ic-round",t.roundCropper),e.uIk("aria-label",t.cropperFrameAriaLabel),e.xp6(2),e.Q6J("ngIf",!t.hideResizeSquares)}}class Fe{constructor(){this.format="png",this.output="blob",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperFrameAriaLabel="Crop photo",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(c){Object.keys(c).filter(t=>t in this).forEach(t=>this[t]=c[t]),this.validateOptions()}setOptionsFromChanges(c){Object.keys(c).filter(t=>t in this).forEach(t=>this[t]=c[t].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var f=function(r){return r.Drag="drag",r.Move="move",r.Resize="resize",r.Pinch="pinch",r}(f||{});function B(r,c){return r/100*c}let Ne=(()=>{class r{crop(t,n,i,o,a){const s=this.getImagePosition(t,n,i,a),l=s.x2-s.x1,p=s.y2-s.y1,h=document.createElement("canvas");h.width=l,h.height=p;const u=h.getContext("2d");if(!u)return null;null!=i.backgroundColor&&(u.fillStyle=i.backgroundColor,u.fillRect(0,0,l,p));const g=(i.transform.scale||1)*(i.transform.flipH?-1:1),M=(i.transform.scale||1)*(i.transform.flipV?-1:1),{translateH:b,translateV:y}=this.getCanvasTranslate(t,i,a),_=t.transformed;u.setTransform(g,0,0,M,_.size.width/2+b,_.size.height/2+y),u.translate(-s.x1/g,-s.y1/M),u.rotate((i.transform.rotate||0)*Math.PI/180),u.drawImage(_.image,-_.size.width/2,-_.size.height/2);const x={width:l,height:p,imagePosition:s,cropperPosition:{...n}};i.containWithinAspectRatio&&(x.offsetImagePosition=this.getOffsetImagePosition(t,n,i,a));const m=this.getResizeRatio(l,p,i);return 1!==m&&(x.width=Math.round(l*m),x.height=i.maintainAspectRatio?Math.round(x.width/i.aspectRatio):Math.round(p*m),function Je(r,c,t){const n=r.width,i=r.height,o=n/(c=Math.round(c)),a=i/(t=Math.round(t)),s=Math.ceil(o/2),l=Math.ceil(a/2),p=r.getContext("2d");if(p){const h=p.getImageData(0,0,n,i),u=p.createImageData(c,t),g=h.data,M=u.data;for(let b=0;b<t;b++)for(let y=0;y<c;y++){const _=4*(y+b*c),x=b*a;let m=0,S=0,J=0,N=0,W=0,q=0,Y=0;const gt=Math.floor(y*o),mt=Math.floor(b*a);let O=Math.ceil((y+1)*o),E=Math.ceil((b+1)*a);O=Math.min(O,n),E=Math.min(E,i);for(let z=mt;z<E;z++){const j=Math.abs(x-z)/l,ft=y*o,xt=j*j;for(let U=gt;U<O;U++){const D=Math.abs(ft-U)/s,I=Math.sqrt(xt+D*D);if(I>=1)continue;m=2*I*I*I-3*I*I+1;const R=4*(U+z*n);Y+=m*g[R+3],J+=m,g[R+3]<255&&(m=m*g[R+3]/250),N+=m*g[R],W+=m*g[R+1],q+=m*g[R+2],S+=m}}M[_]=N/S,M[_+1]=W/S,M[_+2]=q/S,M[_+3]=Y/J}r.width=c,r.height=t,p.putImageData(u,0,0)}}(h,x.width,x.height)),"blob"===o?this.cropToBlob(x,h,i):(x.base64=h.toDataURL("image/"+i.format,this.getQuality(i)),x)}cropToBlob(t,n,i){var o=this;return(0,Z.Z)(function*(){return t.blob=yield new Promise(a=>n.toBlob(a,"image/"+i.format,o.getQuality(i))),t.blob&&(t.objectUrl=URL.createObjectURL(t.blob)),t})()}getCanvasTranslate(t,n,i){if("px"===n.transform.translateUnit){const o=this.getRatio(t,i);return{translateH:(n.transform.translateH||0)*o,translateV:(n.transform.translateV||0)*o}}return{translateH:n.transform.translateH?B(n.transform.translateH,t.transformed.size.width):0,translateV:n.transform.translateV?B(n.transform.translateV,t.transformed.size.height):0}}getRatio(t,n){return t.transformed.size.width/n.width}getImagePosition(t,n,i,o){const a=this.getRatio(t,o),s={x1:Math.round(n.x1*a),y1:Math.round(n.y1*a),x2:Math.round(n.x2*a),y2:Math.round(n.y2*a)};return i.containWithinAspectRatio||(s.x1=Math.max(s.x1,0),s.y1=Math.max(s.y1,0),s.x2=Math.min(s.x2,t.transformed.size.width),s.y2=Math.min(s.y2,t.transformed.size.height)),s}getOffsetImagePosition(t,n,i,o){const a=i.canvasRotation+t.exifTransform.rotate,s=this.getRatio(t,o);let l,p;a%2?(l=(t.transformed.size.width-t.original.size.height)/2,p=(t.transformed.size.height-t.original.size.width)/2):(l=(t.transformed.size.width-t.original.size.width)/2,p=(t.transformed.size.height-t.original.size.height)/2);const h={x1:Math.round(n.x1*s)-l,y1:Math.round(n.y1*s)-p,x2:Math.round(n.x2*s)-l,y2:Math.round(n.y2*s)-p};return i.containWithinAspectRatio||(h.x1=Math.max(h.x1,0),h.y1=Math.max(h.y1,0),h.x2=Math.min(h.x2,t.transformed.size.width),h.y2=Math.min(h.y2,t.transformed.size.height)),h}getResizeRatio(t,n,i){const o=i.resizeToWidth/t,a=i.resizeToHeight/n,s=new Array;i.resizeToWidth>0&&s.push(o),i.resizeToHeight>0&&s.push(a);const l=0===s.length?1:Math.min(...s);return l>1&&!i.onlyScaleDown?l:Math.min(l,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),We=(()=>{class r{resetCropperPosition(t,n,i,o){if(t?.nativeElement)if(i.cropperStaticHeight&&i.cropperStaticWidth)n.x1=0,n.x2=o.width>i.cropperStaticWidth?i.cropperStaticWidth:o.width,n.y1=0,n.y2=o.height>i.cropperStaticHeight?i.cropperStaticHeight:o.height;else{const a=Math.min(i.cropperScaledMaxWidth,o.width),s=Math.min(i.cropperScaledMaxHeight,o.height);if(i.maintainAspectRatio)if(o.width/i.aspectRatio<o.height){n.x1=0,n.x2=a;const l=a/i.aspectRatio;n.y1=(o.height-l)/2,n.y2=n.y1+l}else{n.y1=0,n.y2=s;const l=s*i.aspectRatio;n.x1=(o.width-l)/2,n.x2=n.x1+l}else n.x1=0,n.x2=a,n.y1=0,n.y2=s}}move(t,n,i){const o=this.getClientX(t)-n.clientX,a=this.getClientY(t)-n.clientY;i.x1=n.x1+o,i.y1=n.y1+a,i.x2=n.x2+o,i.y2=n.y2+a}resize(t,n,i,o,a){const s=this.getClientX(t)-n.clientX,l=this.getClientY(t)-n.clientY;switch(n.position){case"left":i.x1=Math.min(Math.max(n.x1+s,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth);break;case"topleft":i.x1=Math.min(Math.max(n.x1+s,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth),i.y1=Math.min(Math.max(n.y1+l,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"top":i.y1=Math.min(Math.max(n.y1+l,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"topright":i.x2=Math.max(Math.min(n.x2+s,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth),i.y1=Math.min(Math.max(n.y1+l,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"right":i.x2=Math.max(Math.min(n.x2+s,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth);break;case"bottomright":i.x2=Math.max(Math.min(n.x2+s,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth),i.y2=Math.max(Math.min(n.y2+l,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"bottom":i.y2=Math.max(Math.min(n.y2+l,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"bottomleft":i.x1=Math.min(Math.max(n.x1+s,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth),i.y2=Math.max(Math.min(n.y2+l,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"center":const p=t.scale,h=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(n.x2-n.x1)*p),a.cropperScaledMaxWidth),u=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(n.y2-n.y1)*p),a.cropperScaledMaxHeight);i.x1=n.clientX-h/2,i.x2=n.clientX+h/2,i.y1=n.clientY-u/2,i.y2=n.clientY+u/2,i.x1<0?(i.x2-=i.x1,i.x1=0):i.x2>o.width&&(i.x1-=i.x2-o.width,i.x2=o.width),i.y1<0?(i.y2-=i.y1,i.y1=0):i.y2>o.height&&(i.y1-=i.y2-o.height,i.y2=o.height)}a.maintainAspectRatio&&this.checkAspectRatio(n.position,i,o,a)}checkAspectRatio(t,n,i,o){let a=0,s=0;switch(t){case"top":n.x2=n.x1+(n.y2-n.y1)*o.aspectRatio,a=Math.max(n.x2-i.width,0),s=Math.max(0-n.y1,0),(a>0||s>0)&&(n.x2-=s*o.aspectRatio>a?s*o.aspectRatio:a,n.y1+=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"bottom":n.x2=n.x1+(n.y2-n.y1)*o.aspectRatio,a=Math.max(n.x2-i.width,0),s=Math.max(n.y2-i.height,0),(a>0||s>0)&&(n.x2-=s*o.aspectRatio>a?s*o.aspectRatio:a,n.y2-=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"topleft":n.y1=n.y2-(n.x2-n.x1)/o.aspectRatio,a=Math.max(0-n.x1,0),s=Math.max(0-n.y1,0),(a>0||s>0)&&(n.x1+=s*o.aspectRatio>a?s*o.aspectRatio:a,n.y1+=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"topright":n.y1=n.y2-(n.x2-n.x1)/o.aspectRatio,a=Math.max(n.x2-i.width,0),s=Math.max(0-n.y1,0),(a>0||s>0)&&(n.x2-=s*o.aspectRatio>a?s*o.aspectRatio:a,n.y1+=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"right":case"bottomright":n.y2=n.y1+(n.x2-n.x1)/o.aspectRatio,a=Math.max(n.x2-i.width,0),s=Math.max(n.y2-i.height,0),(a>0||s>0)&&(n.x2-=s*o.aspectRatio>a?s*o.aspectRatio:a,n.y2-=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"left":case"bottomleft":n.y2=n.y1+(n.x2-n.x1)/o.aspectRatio,a=Math.max(0-n.x1,0),s=Math.max(n.y2-i.height,0),(a>0||s>0)&&(n.x1+=s*o.aspectRatio>a?s*o.aspectRatio:a,n.y2-=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"center":n.x2=n.x1+(n.y2-n.y1)*o.aspectRatio,n.y2=n.y1+(n.x2-n.x1)/o.aspectRatio;const l=Math.max(0-n.x1,0),p=Math.max(n.x2-i.width,0),h=Math.max(n.y2-i.height,0),u=Math.max(0-n.y1,0);(l>0||p>0||h>0||u>0)&&(n.x1+=h*o.aspectRatio>l?h*o.aspectRatio:l,n.x2-=u*o.aspectRatio>p?u*o.aspectRatio:p,n.y1+=u*o.aspectRatio>p?u:p/o.aspectRatio,n.y2-=h*o.aspectRatio>l?h:l/o.aspectRatio)}}getClientX(t){return t.touches?.[0].clientX||t.clientX||0}getClientY(t){return t.touches?.[0].clientY||t.clientY||0}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();let Pe=(()=>{class r{constructor(){this.autoRotateSupported=function Ye(){return new Promise(r=>{const c=new Image;c.onload=()=>{r(1===c.width&&2===c.height)},c.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(t,n){return t.arrayBuffer().then(i=>this.checkImageTypeAndLoadImageFromArrayBuffer(i,t.type,n))}checkImageTypeAndLoadImageFromArrayBuffer(t,n,i){return this.isValidImageType(n)?this.loadImageFromArrayBuffer(t,i):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,n){return fetch(t).then(i=>i.arrayBuffer()).then(i=>this.loadImageFromArrayBuffer(i,n))}loadBase64Image(t,n){const i=this.base64ToArrayBuffer(t);return this.loadImageFromArrayBuffer(i,n)}base64ToArrayBuffer(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");const n=atob(t),i=n.length,o=new Uint8Array(i);for(let a=0;a<i;a++)o[a]=n.charCodeAt(a);return o.buffer}loadImageFromArrayBuffer(t,n){return new Promise((i,o)=>{const a=new Blob([t]),s=URL.createObjectURL(a),l=new Image;l.onload=()=>i({originalImage:l,originalObjectUrl:s,originalArrayBuffer:t}),l.onerror=o,l.src=s}).then(i=>this.transformImageFromArrayBuffer(i,n))}transformImageFromArrayBuffer(t,n){var i=this;return(0,Z.Z)(function*(){const o=yield i.autoRotateSupported,a=yield function je(r){switch("object"==typeof r&&(r=function De(r){const c=new DataView(r);if(65496!==c.getUint16(0,!1))return-2;const t=c.byteLength;let n=2;for(;n<t;){if(c.getUint16(n+2,!1)<=8)return-1;const i=c.getUint16(n,!1);if(n+=2,65505==i){if(1165519206!==c.getUint32(n+=2,!1))return-1;const o=18761==c.getUint16(n+=6,!1);n+=c.getUint32(n+4,o);const a=c.getUint16(n,o);n+=2;for(let s=0;s<a;s++)if(274==c.getUint16(n+12*s,o))return c.getUint16(n+12*s+8,o)}else{if(65280!=(65280&i))break;n+=c.getUint16(n,!1)}}return-1}(r)),r){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(o?-1:t.originalArrayBuffer);return t.originalImage&&t.originalImage.complete?i.transformLoadedImage({original:{objectUrl:t.originalObjectUrl,image:t.originalImage,size:{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:a},n):Promise.reject(new Error("No image loaded"))})()}transformLoadedImage(t,n){var i=this;return(0,Z.Z)(function*(){const o=n.canvasRotation+t.exifTransform.rotate,a={width:t.original.image.naturalWidth,height:t.original.image.naturalHeight};if(0===o&&!t.exifTransform.flip&&!n.containWithinAspectRatio)return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:{...a}},transformed:{objectUrl:t.original.objectUrl,image:t.original.image,size:{...a}},exifTransform:t.exifTransform};const s=i.getTransformedSize(a,t.exifTransform,n),l=document.createElement("canvas");l.width=s.width,l.height=s.height;const p=l.getContext("2d");p?.setTransform(t.exifTransform.flip?-1:1,0,0,1,l.width/2,l.height/2),p?.rotate(Math.PI*(o/2)),p?.drawImage(t.original.image,-a.width/2,-a.height/2);const h=yield new Promise(M=>l.toBlob(M,n.format));if(!h)throw new Error("Failed to get Blob for transformed image.");const u=URL.createObjectURL(h),g=yield i.loadImageFromObjectUrl(u);return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:{...a}},transformed:{objectUrl:u,image:g,size:{width:g.width,height:g.height}},exifTransform:t.exifTransform}})()}loadImageFromObjectUrl(t){return new Promise((n,i)=>{const o=new Image;o.onload=()=>n(o),o.onerror=i,o.src=t})}getTransformedSize(t,n,i){const o=i.canvasRotation+n.rotate;if(i.containWithinAspectRatio){if(o%2){const s=t.height/i.aspectRatio;return{width:Math.max(t.height,t.width*i.aspectRatio),height:Math.max(t.width,s)}}{const s=t.width/i.aspectRatio;return{width:Math.max(t.width,t.height*i.aspectRatio),height:Math.max(t.height,s)}}}return o%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ke=(()=>{class r{constructor(t,n,i,o,a,s,l){this.cropService=t,this.cropperPositionService=n,this.loadImageService=i,this.sanitizer=o,this.cd=a,this.zone=s,this.hammerLoader=l,this.settings=new Fe,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=f,this.imageVisible=!1,this.cropperFrameAriaLabel=this.settings.cropperFrameAriaLabel,this.output=this.settings.output,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new e.vpe,this.startCropImage=new e.vpe,this.imageLoaded=new e.vpe,this.cropperReady=new e.vpe,this.loadImageFailed=new e.vpe,this.transformChange=new e.vpe,this.reset()}ngOnChanges(t){this.onChangesUpdateSettings(t),this.onChangesInputImage(t),this.loadedImage?.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),!this.maintainAspectRatio||!this.resetCropOnAspectRatioChange&&this.aspectRatioIsCorrect()||!t.maintainAspectRatio&&!t.aspectRatio?t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()):this.resetCropperPosition()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop()),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&(this.hideResizeSquares=!0,this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1}))}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent?.target?.files?.length>0}setCssTransform(){const t=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${t}, ${this.transform.translateV||0}${t}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.objectUrl),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit({...this.maxSize}),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){if(this.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{const t={...this.maxSize};this.setMaxSize(),this.resizeCropperPosition(t),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}}activatePinchGesture(){var t=this;return(0,Z.Z)(function*(){yield t.hammerLoader?.();const n=window?.Hammer||null;if(n){const i=new n(t.wrapper.nativeElement);i.get("pinch").set({enable:!0}),i.on("pinchmove",t.onPinch.bind(t)),i.on("pinchend",t.pinchStop.bind(t)),i.on("pinchstart",t.startPinch.bind(t))}else(0,e.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")})()}resizeCropperPosition(t){(t.width!==this.maxSize.width||t.height!==this.maxSize.height)&&(this.cropper.x1=this.cropper.x1*this.maxSize.width/t.width,this.cropper.x2=this.cropper.x2*this.maxSize.width/t.width,this.cropper.y1=this.cropper.y1*this.maxSize.height/t.height,this.cropper.y2=this.cropper.y2*this.maxSize.height/t.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings,this.maxSize),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const n=+t.key;n>=1&&n<=9&&(this.settings.stepSize=n)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const i=t.shiftKey?f.Resize:f.Move,o=t.altKey?function Le(r){switch(r){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function Qe(r){switch(r){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),a=function Be(r,c){switch(r){case"ArrowUp":return{clientX:0,clientY:-1*c};case"ArrowRight":return{clientX:c,clientY:0};case"ArrowDown":return{clientX:0,clientY:c};default:return{clientX:-1*c,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},i,o),this.handleMouseMove(a),this.handleMouseUp()}startMove(t,n,i=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===f.Pinch||n===f.Drag&&!this.allowMoveImage||(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:n,position:i,transform:{...this.transform},clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t),...this.cropper},this.initMouseMove())}initMouseMove(){(0,Q.T)(T(document,"mousemove"),T(document,"touchmove")).pipe((0,Me.R)((0,Q.T)(T(document,"mouseup"),T(document,"touchend")).pipe((0,ve.P)()))).subscribe({next:t=>this.zone.run(()=>{this.handleMouseMove(t),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handleMouseUp(),this.cd.markForCheck()})})}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:f.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2,...this.cropper})}handleMouseMove(t){if(this.moveStart.active)if(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===f.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===f.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===f.Drag){const n=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,i=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform={...this.transform,translateH:(this.moveStart.transform?.translateH||0)+n,translateV:(this.moveStart.transform?.translateV||0)+i},this.setCssTransform()}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===f.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.markForCheck())}setMaxSize(){if(this.sourceImage){const t=getComputedStyle(this.sourceImage.nativeElement);this.maxSize.width=parseFloat(t.width),this.maxSize.height=parseFloat(t.height),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){const t=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/t:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/t:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}handleMouseUp(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===f.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(t=this.settings.output){if(null!=this.loadedImage?.transformed?.image){if(this.startCropImage.emit(),"blob"===t)return this.cropToBlob();if("base64"===t)return this.cropToBase64()}return null}cropToBlob(){var t=this;return new Promise((n,i)=>this.zone.run((0,Z.Z)(function*(){const o=yield t.cropService.crop(t.loadedImage,t.cropper,t.settings,"blob",t.maxSize);o?(t.imageCropped.emit(o),n(o)):i("Crop image failed")})))}cropToBase64(){const t=this.cropService.crop(this.loadedImage,this.cropper,this.settings,"base64",this.maxSize);return t?(this.imageCropped.emit(t),t):null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Ne),e.Y36(We),e.Y36(Pe),e.Y36(k.H7),e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(k.vm,8))},r.\u0275cmp=e.Xpm({type:r,selectors:[["image-cropper"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ue,7),e.Gf(He,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.wrapper=i.first),e.iGM(i=e.CRH())&&(n.sourceImage=i.first)}},hostVars:6,hostBindings:function(t,n){1&t&&e.NdJ("resize",function(){return n.onResize()},!1,e.Jf7),2&t&&(e.Udp("text-align",n.alignImage),e.ekj("disabled",n.disabled)("ngx-ix-hidden",n.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[e.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart","error"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,n){1&t&&(e.TgZ(0,"div",null,0),e.YNc(2,ke,2,8,"img",1),e._UZ(3,"div",2),e.YNc(4,Ee,3,16,"div",3),e.qZA()),2&t&&(e.Udp("background",n.imageVisible&&n.backgroundColor),e.xp6(2),e.Q6J("ngIf",n.safeImgDataUrl),e.xp6(1),e.Udp("width",n.maxSize.width,"px")("height",n.maxSize.height,"px")("margin-left","center"===n.alignImage?n.marginLeft:null),e.xp6(1),e.Q6J("ngIf",n.imageVisible))},dependencies:[v.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),r})(),Ge=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[v.ez]]}),r})();var w=d(95);function Ve(r,c){if(1&r&&e._UZ(0,"img",26),2&r){const t=e.oxw();e.s9C("src",null==t.user?null:t.user.fotoUser,e.LSH)}}function Xe(r,c){if(1&r&&e._UZ(0,"img",27),2&r){const t=e.oxw();e.s9C("src",null==t.user?null:t.user.bannerImg,e.LSH)}}function $e(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",33)(1,"input",34),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.uploadFilePortada(i))}),e.qZA(),e.TgZ(2,"div",35),e.O4$(),e.TgZ(3,"svg",36),e._UZ(4,"path",37),e.qZA(),e.kcU(),e.TgZ(5,"span",38),e._uU(6,"Ingrese la nueva foto de perfil"),e.qZA()()()}}function et(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",43)(1,"image-cropper",44),e.NdJ("imageCropped",function(i){e.CHM(t);const o=e.oxw(3);return e.KtG(o.imageCropped(i))})("imageLoaded",function(i){e.CHM(t);const o=e.oxw(3);return e.KtG(o.imageLoaded(i))})("cropperReady",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.cropperReady())})("loadImageFailed",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.loadImageFailed())}),e.qZA()()}if(2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)}}function tt(r,c){if(1&r&&(e.TgZ(0,"div",43),e._UZ(1,"img",45),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("src",t.previewImage,e.LSH)}}function it(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.actualizarImage(i.userauth.uid))}),e._uU(1,"Actualizar"),e.qZA()}}function nt(r,c){if(1&r&&(e.TgZ(0,"div",39)(1,"div",40),e.YNc(2,et,2,3,"div",41),e.YNc(3,tt,2,1,"div",41),e.qZA(),e.YNc(4,it,2,0,"button",42),e.qZA()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.fotoSeleccionada),e.xp6(1),e.Q6J("ngIf",t.fotoSeleccionada),e.xp6(1),e.Q6J("ngIf",t.fotoSeleccionada)}}function ot(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",28)(1,"button",2),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.buttonModal2())}),e.O4$(),e.TgZ(2,"svg",3),e._UZ(3,"path",4),e.qZA()(),e.kcU(),e.TgZ(4,"div",29)(5,"div",30),e.YNc(6,$e,7,0,"div",31),e.YNc(7,nt,5,3,"div",32),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",!t.fotoSeleccionada),e.xp6(1),e.Q6J("ngIf",t.fotoSeleccionada)}}function rt(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",48)(1,"input",34),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.uploadFilePortada(i))}),e.qZA(),e.TgZ(2,"div",35),e.O4$(),e.TgZ(3,"svg",36),e._UZ(4,"path",37),e.qZA(),e.kcU(),e.TgZ(5,"span",38),e._uU(6,"Ingrese la nueva foto de banner"),e.qZA()()()}}function at(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",43)(1,"image-cropper",44),e.NdJ("imageCropped",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.imageCropped(i))})("imageLoaded",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.imageLoaded(i))})("cropperReady",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.cropperReady())})("loadImageFailed",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.loadImageFailed())}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",3.5)}}function st(r,c){if(1&r&&(e.TgZ(0,"div",43),e._UZ(1,"img",45),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.previewImage,e.LSH)}}function ct(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.actualizarBanner(i.userauth.uid))}),e._uU(1,"Actualizar"),e.qZA()}}function lt(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",28)(1,"button",2),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.buttonModal2())}),e.O4$(),e.TgZ(2,"svg",3),e._UZ(3,"path",4),e.qZA()(),e.kcU(),e.TgZ(4,"div",29)(5,"div",30),e.YNc(6,rt,7,0,"div",47),e.TgZ(7,"div",39)(8,"div",40),e.YNc(9,at,2,3,"div",41),e.YNc(10,st,2,1,"div",41),e.qZA(),e.YNc(11,ct,2,0,"button",42),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",!t.fotoSeleccionada),e.xp6(3),e.Q6J("ngIf",t.fotoSeleccionada),e.xp6(1),e.Q6J("ngIf",t.fotoSeleccionada),e.xp6(1),e.Q6J("ngIf",t.fotoSeleccionada)}}const ht=[{path:"",component:_e,children:[{path:"edit",canActivate:[(()=>{class r{constructor(t,n){this.authService=t,this.router=n,console.log(this.authService.getData())}canActivate(){return new Promise((t,n)=>{const i=this.getProfileIdFromRoute();i?this.authService.obtenerUsuarioPorUserName(i).subscribe(o=>{this.authService.onAuthStateChanged(a=>{const s=this.verify(a,o[0]);t(s)})}):(this.router.navigateByUrl(`/${this.router.url.split("/")[1]}/${this.router.url.split("/")[2]}`),t(!1))})}getProfileIdFromRoute(){return this.router.url.split("/")[2]?this.router.url.split("/")[2]:null}verify(t,n){return!!t&&!!n&&t.uid===n.uid}static#e=this.\u0275fac=function(n){return new(n||r)(e.LFG(H.e),e.LFG(C.F0))};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()],component:(()=>{class r{constructor(t,n,i,o,a){this.router=t,this.route=n,this.authService=i,this.cdr=o,this.sanitizer=a,this.modalPf=!1,this.imageChangedEvent="",this.croppedImage="",this.selectedImages2=[],this.fotoSeleccionada=null,this.previewImage="",this.authService.onAuthStateChanged((s,l)=>{this.userauth=s})}buttonModal(){this.router.navigate(["../"],{relativeTo:this.route})}buttonModal2(){this.modalPf=!1,this.fotoSeleccionada=null,this.modalBanner=!1}onKeyDown(t){const n=t.target;!n.classList.contains("no-close")&&"svg"!==n.tagName&&"li"!==n.tagName&&"path"!==n.tagName&&"span"!==n.tagName&&"ul"!==n.tagName&&"Escape"===t.key&&this.buttonModal()}ngOnInit(){this.route.params.subscribe(t=>{this.profileId=this.router.url.split("/")[2],this.profileId&&this.authService.obtenerUsuarioPorUserName(this.profileId).subscribe(n=>{this.user=n[0]})})}turnPf(){this.modalPf=!0}turnBanner(){this.modalBanner=!0}actualizarUsuario(t,n){t?(this.authService.actualizarUsuario(n.uid,n),this.authService.updateUserDetailsInLocalStorage(),this.user(!1)):this.user(!1)}crearURL(t){return window.URL.createObjectURL(t)}uploadFilePortada(t){const n=t.target.files;this.imageChangedEvent=t,n&&n.length>0&&setTimeout(()=>{this.fotoSeleccionada=n[0],this.cdr.detectChanges()},0)}imageCropped(t){this.previewImage=t.objectUrl,this.croppedImage=t.blob}imageLoaded(t){}cropperReady(){}loadImageFailed(){}actualizarImage(t){this.croppedImage&&this.authService.actualizarFotoPerfil(t,this.croppedImage).then(()=>{this.buttonModal2(),this.buttonModal()})}actualizarBanner(t){this.croppedImage&&this.authService.actualizarBanner(t,this.croppedImage).then(()=>{this.buttonModal2(),this.buttonModal()})}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(C.F0),e.Y36(C.gz),e.Y36(H.e),e.Y36(e.sBO),e.Y36(k.H7))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-modaledit"]],decls:42,vars:9,consts:[[1,"bg-black","fixed","min-h-screen","min-w-scren","h-full","w-full","z-40","bg-opacity-40",3,"keydown"],[1,"fixed","min-w-[60%]","w-[90%]","h-[50%]","md:w-[60%]","md:h-[90%]","md:min-h-[90%]","md:max-w-[60%]","max-h-[90%]","z-40","right-[50%]","translate-x-[50%]","flex","flex-col","items-center","justify-center","translate-y-[50%]","bottom-[50%]"],[1,"absolute","top-5","right-5",3,"click"],["role","button","viewBox","0 0 24 24","width","20px","height","20px",1,"d","Vb","UmNoP"],["fill-rule","evenodd","clip-rule","evenodd","d","M10.94 12L4.47 5.53l1.06-1.06L12 10.94l6.47-6.47 1.06 1.06L13.06 12l6.47 6.47-1.06 1.06L12 13.06l-6.47 6.47-1.06-1.06L10.94 12z"],[1,"flex","flex-col","bg-white","mx-auto","my-auto","items-center","h-full","w-full","rounded-xl","mb-auto","round"],[1,"w-full","h-full","p-5"],[1,"w-full","h-[100px]","flex","flex-row","gap-2"],[1,"bg:w-[80px]","md:w-[100px]","bg:h-[80px]","md:h-[100px]","max-w-[100px]","max-h-[100px]","rounded-full","overflow-hidden",3,"click"],["class","w-full h-full object-cover object-center hover:bg-white hover:opacity-75",3,"src",4,"ngIf"],[1,"w-[80%]","bg:h-[80px]","md:h-[100px]","max-h-[100px]","rounded-xl","hover:bg-white","hover:opacity-75","overflow-hidden",3,"click"],["class","w-full h-full object-cover object-center",3,"src",4,"ngIf"],[1,"w-full","px-5"],[3,"ngSubmit"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-col","gap-1"],[1,"font-Work","text-lg"],["type","text","name","nombre","placeholder","Nombre completo",1,"input-style","py-2","px-2","h-10","font-work","text-xl","font-medium",3,"ngModel","ngModelChange"],["type","text","name","userName","placeholder","Nombre de usuario",1,"input-style","py-2","px-2","h-10","font-work","text-xl","font-medium",3,"ngModel","ngModelChange"],["type","text","name","descripcion","placeholder","Descripci\xf3n","maxlength","150",1,"input-style","py-2","px-2","h-10","font-work","text-xl","font-medium",3,"ngModel","ngModelChange"],["type","text","name","numeroTel","placeholder","N\xfamero de tel\xe9fono",1,"input-style","py-2","px-2","h-10","font-work","text-xl","font-medium",3,"ngModel","ngModelChange"],["type","text","name","ubicacion","placeholder","Ubicaci\xf3n",1,"input-style","py-2","px-2","h-10","font-work","text-xl","font-medium",3,"ngModel","ngModelChange"],[1,"flex","flex-row","gap-5","mt-auto","justify-center"],["type","submit",1,"btn-style","px-2","py-2","text-center","text-xl","min-w-[150px]","w-[100px]","font-work","font-semibold","text-white","rounded-lg","hover:bg-green-700","bg-green-500"],["type","button",1,"btn-style","px-2","py-2","text-xl","min-w-[150px]","w-[100px]","font-work","font-semibold","text-white","rounded-lg","hover:bg-red-700","bg-red-500",3,"click"],["class","fixed min-w-[50%] w-[80%] h-[40%] md:w-[50%] md:h-[80%] md:min-h-[80%] md:max-w-[50%]  max-h-[80%] z-50  right-[50%] translate-x-[50%] flex flex-col items-center justify-center translate-y-[50%] bottom-[50%]",4,"ngIf"],[1,"w-full","h-full","object-cover","object-center","hover:bg-white","hover:opacity-75",3,"src"],[1,"w-full","h-full","object-cover","object-center",3,"src"],[1,"fixed","min-w-[50%]","w-[80%]","h-[40%]","md:w-[50%]","md:h-[80%]","md:min-h-[80%]","md:max-w-[50%]","max-h-[80%]","z-50","right-[50%]","translate-x-[50%]","flex","flex-col","items-center","justify-center","translate-y-[50%]","bottom-[50%]"],[1,"flex","flex-col","border","bg-white","mx-auto","my-auto","items-center","h-full","w-full","rounded-xl","mb-auto","round"],[1,"gap-2","w-full","h-full","p-5","py-20"],["class","relative flex flex-col justify-center items-center p-6 border-2 border-red-500 border-dashed rounded-md my-2 h-full",4,"ngIf"],["class","w-full h-full flex flex-col justify-center items-center",4,"ngIf"],[1,"relative","flex","flex-col","justify-center","items-center","p-6","border-2","border-red-500","border-dashed","rounded-md","my-2","h-full"],["type","file","accept","image/*",1,"absolute","top-0","left-0","bottom-0","w-full","h-full","opacity-0","cursor-pointer",3,"change"],[1,"flex","flex-row","items-center","justify-center","space-x-2"],["role","button","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-8","h-8","text-gray-400"],["fill-rule","evenodd","d","M10 2a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H5a1 1 0 110-2h5V3a1 1 0 011-1z","clip-rule","evenodd"],[1,"text-red-500","font-medium"],[1,"w-full","h-full","flex","flex-col","justify-center","items-center"],[1,"w-full","h-full","flex","flex-row"],["class","w-[50%]",4,"ngIf"],["class","bg-primary-500 hover:bg-primary-400 mt-8 text-white text-xl font-semibold py-2 px-10 rounded-full absolute bottom-0",3,"click",4,"ngIf"],[1,"w-[50%]"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[3,"src"],[1,"bg-primary-500","hover:bg-primary-400","mt-8","text-white","text-xl","font-semibold","py-2","px-10","rounded-full","absolute","bottom-0",3,"click"],["class","relative flex flex-col justify-center p-6 border-2 border-red-500 border-dashed rounded-md my-2 h-full",4,"ngIf"],[1,"relative","flex","flex-col","justify-center","p-6","border-2","border-red-500","border-dashed","rounded-md","my-2","h-full"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e.NdJ("keydown",function(a){return i.onKeyDown(a)}),e.qZA(),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return i.buttonModal()}),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4),e.qZA()(),e.kcU(),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"button",8),e.NdJ("click",function(){return i.turnPf()}),e.YNc(9,Ve,1,1,"img",9),e.qZA(),e.TgZ(10,"button",10),e.NdJ("click",function(){return i.turnBanner()}),e.YNc(11,Xe,1,1,"img",11),e.qZA()(),e.TgZ(12,"div",12)(13,"form",13),e.NdJ("ngSubmit",function(){return i.actualizarUsuario(!0,i.user)}),e.TgZ(14,"div",14)(15,"div",15)(16,"label",16),e._uU(17,"Nombre:"),e.qZA(),e.TgZ(18,"input",17),e.NdJ("ngModelChange",function(a){return i.user.nombre=a}),e.qZA()(),e.TgZ(19,"div",15)(20,"label",16),e._uU(21,"Nombre de Usuario:"),e.qZA(),e.TgZ(22,"input",18),e.NdJ("ngModelChange",function(a){return i.user.userName=a}),e.qZA()(),e.TgZ(23,"div",15)(24,"label",16),e._uU(25,"Descripci\xf3n:"),e.qZA(),e.TgZ(26,"input",19),e.NdJ("ngModelChange",function(a){return i.user.descripcion=a}),e.qZA()(),e.TgZ(27,"div",15)(28,"label",16),e._uU(29,"Numero telefonico:"),e.qZA(),e.TgZ(30,"input",20),e.NdJ("ngModelChange",function(a){return i.user.numeroTel=a}),e.qZA()(),e.TgZ(31,"div",15)(32,"label",16),e._uU(33,"Ubicaci\xf3n:"),e.qZA(),e.TgZ(34,"input",21),e.NdJ("ngModelChange",function(a){return i.user.ubicacion=a}),e.qZA()()(),e.TgZ(35,"div",22)(36,"button",23),e._uU(37,"Actualizar"),e.qZA(),e.TgZ(38,"button",24),e.NdJ("click",function(){return i.buttonModal()}),e._uU(39,"Cancelar"),e.qZA()()()()()()(),e.YNc(40,ot,8,2,"div",25),e.YNc(41,lt,12,4,"div",25)),2&n&&(e.xp6(9),e.Q6J("ngIf",null!=(null==i.user?null:i.user.fotoUser)),e.xp6(2),e.Q6J("ngIf",i.user.fotoUser),e.xp6(7),e.Q6J("ngModel",i.user.nombre),e.xp6(4),e.Q6J("ngModel",i.user.userName),e.xp6(4),e.Q6J("ngModel",i.user.descripcion),e.xp6(4),e.Q6J("ngModel",i.user.numeroTel),e.xp6(4),e.Q6J("ngModel",i.user.ubicacion),e.xp6(6),e.Q6J("ngIf",i.modalPf),e.xp6(1),e.Q6J("ngIf",i.modalBanner))},dependencies:[v.O5,Ke,w._Y,w.Fj,w.JJ,w.JL,w.nD,w.On,w.F]})}return r})()}]}];let pt=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[C.Bz.forChild(ht),C.Bz]})}return r})();var dt=d(5191);let ut=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[v.ez,pt,dt.m,Ge,w.u5]})}return r})()}}]);